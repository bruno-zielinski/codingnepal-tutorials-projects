function onSuccess(t){button.innerText="Detecting your location...";let{latitude:e,longitude:o}=t.coords;fetch(`https://api.opencagedata.com/geocode/v1/json?q=${e}+${o}&key=${api_key}`).then(t=>t.json()).then(t=>{let e=t.results[0].components,{road:o,postcode:n,city:c,state:r,country:i}=e;button.innerText=`${o} - ${n}, ${c}, ${r}, ${i}`,console.table(e)}).catch(()=>{button.innerText="Something went wrong"})}function onError(t){1===t.code?button.innerText="Yor denied the request":2===t.code?button.innerText="Location not available":button.innerText="Something went wrong",button.setAttribute("disabled","true")}const button=document.querySelector("button");button.addEventListener("click",()=>{navigator.geolocation?(button.innerText="Allow to detect location",navigator.geolocation.getCurrentPosition(onSuccess,onError)):button.innerText="Yor browser not support"});const api_key="fcc2365c95354a74bf74e278a7541aeb";